# LINE店舗売却診断フロー管理システム

LINEボットのアンケートフローを視覚的に編集・管理できるシステムです。

## 📋 機能

### 🤖 LINEボット機能
- 複雑な分岐フローによる詳細診断
- エリア、経営状況、利益レベルなどの多段階質問
- Flex Messageによる美しいUI
- 自動的な診断結果表示と相談予約機能

### ✨ フローチャート可視化
- アンケートフローをノードとして視覚的に表示
- ドラッグ&ドロップでキャンバス操作
- ズーム機能（拡大・縮小・リセット）
- ノード間の接続線を自動描画

### 📝 リアルタイム編集
- ノードをクリックして質問内容を編集
- ボタンのラベルと遷移先を設定
- ステップ番号やメッセージの編集
- 変更はすぐにフローチャートに反映

## 🚀 使用方法

### 1. 管理画面へアクセス
```
https://line-shop-diagnosis.vercel.app/admin
```

### 2. フローチャートの操作
- **ノード選択**: ノードをクリックして選択
- **キャンバス移動**: 空白部分をドラッグしてパン操作
- **ズーム**: マウスホイールまたは右下のズームボタン

### 3. 質問の編集
1. 編集したいノードをクリック
2. 左側の編集パネルで内容を変更
3. 変更は自動的に反映されます

### 4. ボタンの管理
- **追加**: 「ボタン追加」ボタンをクリック
- **削除**: 各ボタンの「削除」ボタンをクリック
- **遷移先設定**: ドロップダウンから次のノードを選択

### 5. 設定の保存
- **保存**: 「💾 保存」ボタンでJSONファイルをダウンロード

## 📊 フロー設定構造

### ノードタイプ
- **welcome**: ウェルカムメッセージ
- **question**: アンケート質問
- **result**: 診断結果

## 🔧 開発者向け

### APIエンドポイント
- `GET /api/admin` - 管理画面
- `GET /api/admin/flow-config.json` - フロー設定取得
- `POST /api/update-flow` - フロー設定更新
- `POST /api/webhook` - LINEボットWebhook

### ファイル構成
```
├── admin.html              # 管理画面UI
├── flow-manager.js         # フローチャート管理JavaScript
├── flow-config.json        # フロー設定データ
├── flow-loader.js          # フロー設定ローダー
├── api/
│   ├── webhook.js          # LINEボットWebhook
│   ├── admin.js            # 管理画面API
│   └── update-flow.js      # フロー更新API
└── README.md               # このファイル
```